<html>
<head>
    <title>frontend/src/pages/CalendarPage.jsx</title>
    <style type="text/css" media="screen">
        #editor {
            position: absolute;
            top: 40px;
            right: 0;
            bottom: 0;
            left: 0;
        }
    </style>
</head>
<body style="font-family: 'DejaVu Sans', Arial, Helvetica, sans-serif">
<h3 style="margin-bottom: 0">frontend/src/pages/CalendarPage.jsx (<b>92</b> lines of code) (<a href="CalendarPage.jsx">raw</a>):</h3>
<div id="editor">// src/pages/CalendarPage.jsx
import React, { useState } from &quot;react&quot;;
import { useSearchParams } from &quot;react-router-dom&quot;;
import { useCalendarEvents } from &quot;../features/calendar/hooks/useCalendarEvents&quot;;
import EventForm from &quot;../features/calendar/components/EventForm&quot;;
import CalendarView from &quot;../features/calendar/components/CalendarView&quot;;
import { DEFAULT_CATEGORIES } from &quot;../utils/constants&quot;;

export default function CalendarPage() {
  const [searchParams] = useSearchParams();
  const groupId = searchParams.get(&quot;groupId&quot;);
  const {
    events,
    isSubmitting,
    errors,
    setErrors,
    handleFormSubmit,
    handleSelectEvent,
    handleDeleteEvent,
    handleSelectSlot,
    getInitialFormState,
  } = useCalendarEvents();

  const [categories, setCategories] = useState(DEFAULT_CATEGORIES);
  const [formEvent, setFormEvent] = useState(getInitialFormState());
  const [isEditing, setIsEditing] = useState(false);
  const [editingEventId, setEditingEventId] = useState(null);
  const [currentView, setCurrentView] = useState('week');
  const [currentDate, setCurrentDate] = useState(new Date());

  const onSubmit = (e) =&gt; {
    e.preventDefault();
    handleFormSubmit(
      formEvent,
      isEditing,
      editingEventId,
      () =&gt; {
        if (isEditing) {
          handleCancelEdit();
        } else {
          setFormEvent(getInitialFormState());
        }
      }
    );
  };

  const onSelectEvent = (event) =&gt; {
    handleSelectEvent(event, (eventData, eventId) =&gt; {
      setFormEvent(eventData);
      setIsEditing(true);
      setEditingEventId(eventId);
    });
  };

  const onDelete = () =&gt; {
    handleDeleteEvent(editingEventId, () =&gt; {
      handleCancelEdit();
    });
  };

  const onCancelEdit = () =&gt; {
    setIsEditing(false);
    setEditingEventId(null);
    setFormEvent(getInitialFormState());
    setErrors({});
  };

  const onSelectSlot = (slotInfo) =&gt; {
    handleSelectSlot(slotInfo, formEvent.color, formEvent.categoryName);
  };

  return (
    &lt;div className=&quot;min-h-screen p-6 bg-gray-50 text-gray-900&quot;&gt;
      &lt;div className=&quot;max-w-7xl mx-auto&quot;&gt;
        &lt;EventForm
          formEvent={formEvent}
          setFormEvent={setFormEvent}
          categories={categories}
          setCategories={setCategories}
          isEditing={isEditing}
          isSubmitting={isSubmitting}
          errors={errors}
          setErrors={setErrors}
          onSubmit={onSubmit}
          onDelete={onDelete}
          onCancel={onCancelEdit}
        /&gt;

        &lt;CalendarView
          events={events}
          currentView={currentView}
          setCurrentView={setCurrentView}
          currentDate={currentDate}
          setCurrentDate={setCurrentDate}
          onSelectEvent={onSelectEvent}
          onSelectSlot={onSelectSlot}
        /&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
}

</div>
<script src="https://www.zeljkoobrenovic.com/tools/common/lib/ace/ace.js" type="text/javascript" charset="utf-8"></script>
<script>
    var editor = ace.edit("editor");
    editor.session.setMode("ace/mode/html");
    editor.setTheme("ace/theme/xcode");
    editor.setReadOnly(true);
    editor.setOption("wrap", true);
    editor.setPrintMarginColumn(120);
</script>
</body>
